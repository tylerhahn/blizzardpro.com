<div class="bl-dynamic-form">
    <div class="row p-5">
        <div class="row">
            <img style="width: 200px; margin: 0 auto;" src="{{section.settings.logo | img_url: 'master'}}" alt="IRiS Quote Builder">
            <h3 style="color: {{section.settings.text_color}}">{{section.settings.form_text}}</h3>
            <p style="color: {{section.settings.text_color}}; font-size: 1.2em;">{{section.settings.form_copy }}</p>
        </div>
        <div class="row bl-{{section.id}}"></div>
    </div>
    <div class="overlay"></div>
</div>


{% schema %}

{
    "name": "Hubspot Form (Dynamic)",
    "settings": [
        {
            "type": "image_picker",
            "id": "logo",
            "label": "logo"
        }, {
            "type": "text",
            "id": "form_text",
            "label": "Form Text"
        }, {
            "type": "text",
            "id": "form_copy",
            "label": "Form Copy"
        }, {
            "type": "image_picker",
            "id": "background_image",
            "label": "Background Image"
        }, {
            "type": "color",
            "id": "text_color",
            "label": "Text Color",
            "default": "#000000"
        }, {
            "type": "color",
            "id": "button_color",
            "label": "Button Color",
            "default": "#000000"
        }, {
            "type": "text",
            "id": "hs_value",
            "label": "Hubspot Form Value"
        }
    ],
    "presets": [
        {
            "name": "Dynamic Hubspot Form",
            "category": "Image"
        }
    ]
}

{% endschema %}


<!--[if lte IE 8]>
<script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2-legacy.js"></script>
<![endif]-->
<script charset="utf-8" src="//js.hsforms.net/forms/v2.js" type="text/javascript"></script>
<script>
  hbspt.forms.create({
    portalId: "4135982",
    formId: "2d69787c-6bed-419b-8678-86c51dd1e234",
      target: ".bl-{{section.id}}",
      onFormSubmit:  () => {
          QuoteBuilder();
          formSubmitGA('dynamic_hubspot_form');
          window.open(
              "https://www.calc.blizzardpro.com", "_blank");
        },
      onFormReady: setPageSlugToForm
  });

  function setPageSlugToForm() {
    $('input[name="dynamic_shopify_form_referrer"]').val('{{section.settings.hs_value}}').change();
  }
  </script>


<style>

#shopify-section-iris-calc-dynamic-form{
    background-image: url({{section.settings.background_image | img_url: 'master'}});
    background-size: cover;
    background-position: center;
    position: relative;
}

.submitted-message {
    font-size: 1.7em;
    border-radius: 100px;
    border: 4px solid {{section.settings.button_color}};
    text-align: center;
    display: table;
    padding: 6px 20px 0 20px;
    color: white;
}
    .bl-dynamic-form h3 span{
    border-bottom: 5px solid {{section.settings.button_color}};
    }
    .bl-dynamic-form input.hs-button.primary.large{
        background: {{section.settings.button_color}};
    }
    label#label-email-2d69787c-6bed-419b-8678-86c51dd1e234{
        color: {{section.settings.text_color}};
    }
    .bl-dynamic-form p {
        text-shadow: 5px 4px 7px rgba(0, 0, 0, 0.8);
    }
    .bl-dynamic-form h3{
        text-shadow: 5px 4px 7px rgba(0, 0, 0, 0.8);
        font-size: 1.8em;
        font-family: 'Source Sans Pro';
        text-transform: none;
        letter-spacing: 0;
    }
    form#hsForm_2d69787c-6bed-419b-8678-86c51dd1e234 {
        display: flex;
        align-items: flex-end;
    }

label.hs-error-msg {
    display: none;
}

.hs_submit.hs-submit {
    margin: 0;
    width: 100%;
}

input.hs-button.primary.large {
    margin: 0;
    width: 100%;
    border: none;
    box-shadow: 6px 3px 14px 1px black;
}

.hs_email.hs-email.hs-fieldtype-text.field.hs-form-field {
    margin: 0;
}

input#email-2d69787c-6bed-419b-8678-86c51dd1e234 {
    border-radius: 50px;
    background: white;
    border: none;
    margin-right: 10px;
}
.bl-dynamic-form .row {
    max-width: 430px;
    margin: 0 auto !important;
}
</style>


<script>
    function QuoteBuilder() {
        days = 365;
        myDate = new Date();
        myDate.setTime(myDate.getTime() + days * 24 * 60 * 60 * 1000);
        document.cookie = "QuoteBuilder=Accepted; expires=" + myDate.toGMTString();
    }

    var cookie = document
        .cookie
        .split(";")
        .map(function (x) {
            return x.trim().split("=");
        })
        .filter(function (x) {
            return x[0] === "QuoteBuilder";
        })
        .pop();

    if (cookie && cookie[1] === "Accepted") {


    } else {
        $(".start-modal").fadeIn("fast");
    }
</script>